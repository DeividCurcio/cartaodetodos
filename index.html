<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cart√£o de TODOS ‚Äì Benef√≠cios e Ades√£o | Consultor Deivid Curcio</title>
    
    <!-- World App Mini App Meta Tags -->
    <meta name="world-app-meta" content="mini-app">
    <meta name="world-app-description" content="Cart√£o de TODOS - Economize em sa√∫de, educa√ß√£o e lazer com verifica√ß√£o World ID">

    <!-- ======================= CSS AVAN√áADO ======================= -->
    <style>
        :root {
            --cor-primaria: #0066cc;
            --cor-secundaria: #00b300;
            --cor-fundo: #f7f7f7;
            --cor-texto: #333;
            --cor-branco: #fff;
        }

        body {
            margin: 0;
            font-family: "Segoe UI", Arial, sans-serif;
            background: var(--cor-fundo);
            color: var(--cor-texto);
            line-height: 1.7;
        }

        /* HEADER */
        header {
            background: var(--cor-primaria);
            color: var(--cor-branco);
            padding: 40px 20px;
            text-align: center;
            animation: fadeInDown 1s ease;
        }

        header h1 {
            margin-bottom: 10px;
            font-size: 32px;
        }

        /* MENU */
        nav {
            background: var(--cor-primaria);
            padding: 10px;
            text-align: center;
        }

        nav a {
            color: var(--cor-branco);
            margin: 0 15px;
            text-decoration: none;
            font-size: 18px;
            font-weight: bold;
        }

        nav a:hover {
            color: #ffdd00;
        }

        /* CONTAINER */
        .container {
            width: 90%;
            max-width: 900px;
            margin: auto;
            padding: 20px;
            background: var(--cor-branco);
            margin-top: 20px;
            border-radius: 10px;
            animation: fadeIn 1s ease;
        }

        .image-banner {
            width: 100%;
            border-radius: 10px;
            margin: 15px 0;
            box-shadow: 0px 4px 12px rgba(0, 0, 0, 0.2);
        }

        h2 {
            color: var(--cor-primaria);
            margin-top: 25px;
        }

        h3 {
            color: #004c99;
        }

        /* CTA */
        .cta {
            background: var(--cor-secundaria);
            color: white;
            padding: 18px;
            text-align: center;
            margin: 30px 0;
            font-size: 22px;
            border-radius: 12px;
            cursor: pointer;
            transition: 0.3s;
        }

        .cta:hover {
            background: #009926;
            transform: scale(1.03);
        }

        .cta a {
            color: var(--cor-branco);
            text-decoration: none;
            font-weight: bold;
        }

        /* CTA espec√≠fico: Pe√ßa seu Cart√£o */
        #peca-seu-cartao {
            background: #FC5404;
        }

        #peca-seu-cartao:hover {
            background: #e24c04;
        }

        /* BOT√ÉO WHATSAPP FLUTUANTE */
        .whatsapp-btn {
            position: fixed;
            bottom: 25px;
            right: 25px;
            background: #25d366;
            color: white;
            padding: 18px 20px;
            border-radius: 50px;
            font-size: 22px;
            font-weight: bold;
            display: flex;
            align-items: center;
            text-decoration: none;
            box-shadow: 0px 4px 14px rgba(0, 0, 0, 0.4);
            animation: pulse 2s infinite;
        }

        .whatsapp-btn:hover {
            transform: scale(1.05);
            background: #1ebe57;
        }

        .whatsapp-btn img {
            width: 28px;
            margin-right: 10px;
        }

        /* FOOTER */
        footer {
            text-align: center;
            padding: 25px;
            margin-top: 40px;
            background: #eee;
        }

        /* ANIMA√á√ïES */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeInDown {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.07); }
            100% { transform: scale(1); }
        }

        /* WORLD APP INTEGRATION STYLES */
        .world-app-section {
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: white;
            padding: 30px 20px;
            border-radius: 15px;
            margin: 30px 0;
            text-align: center;
        }

        .world-app-section h2 {
            color: #00d4ff;
            margin-bottom: 15px;
        }

        .world-id-btn {
            background: linear-gradient(135deg, #00d4ff, #7c3aed);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            margin: 10px;
        }

        .world-id-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 20px rgba(0, 212, 255, 0.4);
        }

        .world-id-btn:disabled {
            background: #666;
            cursor: not-allowed;
            transform: none;
        }

        .world-app-badge {
            display: inline-flex;
            align-items: center;
            background: rgba(255,255,255,0.1);
            padding: 8px 16px;
            border-radius: 20px;
            margin: 10px 0;
            font-size: 14px;
        }

        .world-app-badge img {
            width: 20px;
            height: 20px;
            margin-right: 8px;
        }

        .verification-status {
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            font-weight: bold;
        }

        .verification-status.verified {
            background: rgba(0, 255, 136, 0.2);
            border: 2px solid #00ff88;
            color: #00ff88;
        }

        .verification-status.pending {
            background: rgba(255, 193, 7, 0.2);
            border: 2px solid #ffc107;
            color: #ffc107;
        }

        .world-chain-info {
            background: rgba(255,255,255,0.05);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
            text-align: left;
        }

        .world-chain-info h3 {
            color: #00d4ff;
            margin-bottom: 10px;
        }

        .world-chain-info ul {
            margin: 10px 0;
            padding-left: 20px;
        }

        .world-chain-info li {
            margin: 5px 0;
            color: #ccc;
        }

        .mini-app-features {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .feature-card {
            background: rgba(255,255,255,0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .feature-card h4 {
            color: #00d4ff;
            margin-bottom: 8px;
        }

        .feature-card p {
            color: #aaa;
            font-size: 14px;
            margin: 0;
        }

        /* World App environment indicator */
        .world-app-env-banner {
            background: linear-gradient(90deg, #00d4ff, #7c3aed);
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            display: none;
        }

        .world-app-env-banner.active {
            display: block;
        }
    </style>
</head>

<body>

    <!-- World App Environment Banner -->
    <div id="world-app-banner" class="world-app-env-banner">
        üåç Executando dentro do World App
    </div>

    <header>
        <h1>Cart√£o de TODOS</h1>
        <p>Economize em sa√∫de, educa√ß√£o e lazer ‚Äì Atendimento com Deivid Curcio</p>
    </header>

    <nav>
        <a href="#beneficios">Benef√≠cios</a>
        <a href="#como-funciona">Como Funciona</a>
        <a href="#world-app">World App</a>
        <a href="#faq">FAQ</a>
        <a href="#contato">Contato</a>
    </nav>

    <div class="container">

        <img src="https://cartaodetodosrio.com.br/wp-content/uploads/2022/07/logo-original-1024x266.png" 
             alt="Cart√£o de TODOS" class="image-banner">

        <h2 id="como-funciona">Como funciona o Cart√£o de TODOS?</h2>
        <p>
            O Cart√£o de TODOS oferece descontos em consultas m√©dicas, exames,
            odontologia, cursos, lazer, farm√°cias e muito mais ‚Äî tudo por uma mensalidade acess√≠vel.
        </p>

           <img src="https://www.cartaodetodos.com.br/_next/static/media/amor-saude-consultorio.0d0a96b3.png" 
               class="image-banner" alt="Consulta m√©dica com desconto">

        <h3>Passo a passo para usar:</h3>
        <ul>
            <li>Fa√ßa o cadastro online</li>
            <li>Pague a mensalidade</li>
            <li>Receba o cart√£o digital</li>
            <li>Use nos estabelecimentos parceiros</li>
        </ul>

        <h2 id="beneficios">Principais Benef√≠cios</h2>
        <ul>
            <li>Consultas m√©dicas acess√≠veis</li>
            <li>Exames com valores reduzidos</li>
            <li>Odontologia com pre√ßos especiais</li>
            <li>Descontos em farm√°cias</li>
            <li>Cursos, faculdades e idiomas</li>
            <li>Academias, viagens, pet shops e lazer</li>
        </ul>

        <!-- ======================= WORLD APP INTEGRATION ======================= -->
        <div id="world-app" class="world-app-section">
            <h2>üåç Integra√ß√£o com World App</h2>
            
            <div class="world-app-badge">
                <span style="font-size: 20px;">üåç</span>
                <span>Mini App compat√≠vel com World App</span>
            </div>

            <p>Verifique sua identidade com World ID para obter benef√≠cios exclusivos e descontos adicionais!</p>

            <!-- World ID Verification Status -->
            <div id="verification-status" class="verification-status pending">
                ‚è≥ Verifica√ß√£o World ID pendente
            </div>

            <!-- World ID Verification Button -->
            <button id="world-id-verify-btn" class="world-id-btn" onclick="initiateWorldIDVerification()">
                üîê Verificar com World ID
            </button>

            <!-- Mini App Features -->
            <div class="mini-app-features">
                <div class="feature-card">
                    <h4>üõ°Ô∏è Prova de Humanidade</h4>
                    <p>Verifica√ß√£o segura que voc√™ √© uma pessoa real</p>
                </div>
                <div class="feature-card">
                    <h4>üí∞ Benef√≠cios Exclusivos</h4>
                    <p>Descontos adicionais para usu√°rios verificados</p>
                </div>
                <div class="feature-card">
                    <h4>üîó World Chain</h4>
                    <p>Transa√ß√µes seguras na blockchain</p>
                </div>
                <div class="feature-card">
                    <h4>üì± Carteira Digital</h4>
                    <p>Integra√ß√£o com carteira World App</p>
                </div>
            </div>

            <!-- World Chain Information -->
            <div class="world-chain-info">
                <h3>‚õìÔ∏è Sobre World Chain</h3>
                <p>O Cart√£o de TODOS est√° explorando a integra√ß√£o com World Chain, a blockchain da Worldcoin, oferecendo:</p>
                <ul>
                    <li>Transa√ß√µes r√°pidas e seguras</li>
                    <li>Gas gratuito para usu√°rios verificados com World ID</li>
                    <li>Compatibilidade total com Ethereum (EVM)</li>
                    <li>Prioridade de blockspace para humanos verificados</li>
                </ul>
                <p style="margin-top: 15px; color: #888; font-size: 14px;">
                    üìö Para desenvolvedores: Consulte a <a href="https://docs.world.org/world-chain/developers/deploy" target="_blank" style="color: #00d4ff;">documenta√ß√£o World Chain</a>
                </p>
            </div>
        </div>
        <!-- ======================= FIM WORLD APP INTEGRATION ======================= -->

        <h2 id="faq">Perguntas Frequentes</h2>

        <h3>√â plano de sa√∫de?</h3>
        <p>N√£o. √â um cart√£o de descontos.</p>

        <h3>Tem car√™ncia?</h3>
        <p>N√£o. A maioria dos servi√ßos √© liberada imediatamente.</p>

        <h3>Posso incluir dependentes?</h3>
        <p>Sim! A fam√≠lia inteira pode usar.</p>

        <h2 id="contato">Fale comigo para ades√£o</h2>

        <div class="cta">
            <a href="https://wa.me/5522999604947" target="_blank" rel="noopener noreferrer">
                üí¨ Fale comigo no WhatsApp: (22) 99960-4947
            </a>
        </div>

        <!-- CTA Typeform: Pe√ßa seu Cart√£o -->
        <div class="cta" id="peca-seu-cartao">
            <a href="https://form.typeform.com/to/bn74ghpG" target="_blank" rel="noopener noreferrer">
                üßæ Pe√ßa seu Cart√£o agora
            </a>
        </div>

    </div>

    <footer>
        ¬© 2025 ‚Äì Criado por Deivid Curcio | Consultor Cart√£o de TODOS  
        <br>WhatsApp: (22) 99960-4947
        <br><small style="color: #999;">Integrado com World App | <a href="https://docs.world.org/mini-apps" target="_blank" style="color: #00d4ff;">World Developer Docs</a></small>
    </footer>

    <!-- ======================= WORLD APP MINIKIT SDK ======================= -->
    <script type="module">
        // Import MiniKit from Worldcoin CDN
        // Using the latest MiniKit SDK for World App integration
        // Reference: https://docs.world.org/mini-apps/quick-start/installing
        
        import { MiniKit } from 'https://cdn.jsdelivr.net/npm/@worldcoin/minikit-js@1.8.0/+esm';

        // Initialize MiniKit and check World App environment
        window.MiniKit = MiniKit;
        
        // =====================================================================
        // IMPORTANT: Configuration for World ID verification
        // Before deploying to production:
        // 1. Register your app at https://developer.world.org
        // 2. Replace 'appId' with your production App ID
        // 3. Create an action in the Developer Portal and update 'actionId'
        // 4. Update 'signal' if needed for your verification context
        // =====================================================================
        window.WorldAppConfig = {
            appId: 'app_staging_cartaodetodos', // TODO: Replace with production App ID from World Developer Portal
            actionId: 'verify_user',            // Action ID configured in Developer Portal
            verificationLevel: 'orb',           // 'orb' for maximum security, 'device' for lighter verification
            signal: 'cartao_de_todos_user'      // Context signal - customize per verification scenario
        };

        // Check if running inside World App
        function checkWorldAppEnvironment() {
            const isInWorldApp = MiniKit.isInstalled();
            const banner = document.getElementById('world-app-banner');
            const verifyBtn = document.getElementById('world-id-verify-btn');
            
            if (isInWorldApp) {
                banner.classList.add('active');
                console.log('‚úÖ Running inside World App');
                
                // Enable full World ID verification in World App
                if (verifyBtn) {
                    verifyBtn.textContent = 'üîê Verificar com World ID';
                    verifyBtn.disabled = false;
                }
            } else {
                console.log('‚ÑπÔ∏è Running outside World App - Some features may be limited');
                
                // Still allow verification via redirect for external browsers
                if (verifyBtn) {
                    verifyBtn.textContent = 'üîê Verificar com World ID (Abrir World App)';
                }
            }
            
            return isInWorldApp;
        }

        // Initialize World ID verification
        window.initiateWorldIDVerification = async function() {
            const verifyBtn = document.getElementById('world-id-verify-btn');
            const statusDiv = document.getElementById('verification-status');
            
            try {
                verifyBtn.disabled = true;
                verifyBtn.textContent = '‚è≥ Verificando...';
                statusDiv.className = 'verification-status pending';
                statusDiv.textContent = '‚è≥ Processando verifica√ß√£o...';

                const isInWorldApp = MiniKit.isInstalled();
                
                if (isInWorldApp) {
                    // Use MiniKit for in-app verification
                    // Reference: https://docs.world.org/mini-apps/commands/verify
                    const { finalPayload } = await MiniKit.commandsAsync.verify({
                        action: window.WorldAppConfig.actionId,
                        verification_level: window.WorldAppConfig.verificationLevel,
                        signal: window.WorldAppConfig.signal // Configurable context signal
                    });

                    if (finalPayload.status === 'success') {
                        // Verification successful
                        handleVerificationSuccess(finalPayload);
                    } else {
                        throw new Error(finalPayload.error_code || 'Verification failed');
                    }
                } else {
                    // Redirect to World App for verification (external browser flow)
                    // Using World ID Web Widget fallback
                    showExternalVerificationModal();
                }
            } catch (error) {
                console.error('World ID verification error:', error);
                handleVerificationError(error);
            }
        };

        // Handle successful verification
        function handleVerificationSuccess(payload) {
            const statusDiv = document.getElementById('verification-status');
            const verifyBtn = document.getElementById('world-id-verify-btn');
            
            statusDiv.className = 'verification-status verified';
            statusDiv.innerHTML = '‚úÖ Verificado com World ID! Voc√™ √© eleg√≠vel para benef√≠cios exclusivos.';
            
            verifyBtn.textContent = '‚úì Verificado';
            verifyBtn.disabled = true;
            verifyBtn.style.background = 'linear-gradient(135deg, #00ff88, #00cc6a)';
            
            // Store only non-sensitive verification status in sessionStorage
            // Note: For production, implement server-side verification persistence
            // Do NOT store nullifier_hash or other sensitive proof data client-side
            sessionStorage.setItem('worldIdVerified', 'true');
            sessionStorage.setItem('worldIdVerificationLevel', payload.verification_level || 'unknown');
            sessionStorage.setItem('worldIdVerifiedAt', new Date().toISOString());
            
            console.log('‚úÖ World ID verification successful');
            
            // Show rewards eligibility message
            showRewardsEligibility();
        }

        // Handle verification error
        function handleVerificationError(error) {
            const statusDiv = document.getElementById('verification-status');
            const verifyBtn = document.getElementById('world-id-verify-btn');
            
            statusDiv.className = 'verification-status pending';
            statusDiv.textContent = '‚ùå Erro na verifica√ß√£o. Tente novamente.';
            
            verifyBtn.disabled = false;
            verifyBtn.textContent = 'üîê Tentar novamente';
            
            console.error('World ID verification error:', error);
        }

        // Show modal for external browser verification
        function showExternalVerificationModal() {
            const verifyBtn = document.getElementById('world-id-verify-btn');
            const statusDiv = document.getElementById('verification-status');
            
            // For external browsers, provide instructions to use World App
            statusDiv.className = 'verification-status pending';
            statusDiv.innerHTML = `
                üì± Para verifica√ß√£o completa com World ID:<br>
                <small>
                    1. Baixe o <a href="https://worldcoin.org/download" target="_blank" style="color: #00d4ff;">World App</a><br>
                    2. Crie sua World ID<br>
                    3. Acesse este site pelo World App
                </small>
            `;
            
            verifyBtn.disabled = false;
            verifyBtn.textContent = 'üì± Baixar World App';
            verifyBtn.onclick = function() {
                window.open('https://worldcoin.org/download', '_blank');
            };
        }

        // Show rewards eligibility message for verified users
        function showRewardsEligibility() {
            const worldAppSection = document.getElementById('world-app');
            
            const rewardsDiv = document.createElement('div');
            rewardsDiv.style.cssText = `
                background: linear-gradient(135deg, #00ff88, #00cc6a);
                color: #000;
                padding: 20px;
                border-radius: 15px;
                margin-top: 20px;
                text-align: center;
                font-weight: bold;
            `;
            rewardsDiv.innerHTML = `
                üéâ Parab√©ns! Voc√™ est√° eleg√≠vel para recompensas!<br>
                <small style="font-weight: normal;">
                    Como usu√°rio verificado, voc√™ tem acesso a descontos adicionais e benef√≠cios exclusivos do Cart√£o de TODOS.
                </small>
            `;
            
            worldAppSection.appendChild(rewardsDiv);
        }

        // Check for existing verification on page load
        // Note: Uses sessionStorage so verification expires when browser session ends
        function checkExistingVerification() {
            const isVerified = sessionStorage.getItem('worldIdVerified') === 'true';
            
            if (isVerified) {
                const statusDiv = document.getElementById('verification-status');
                const verifyBtn = document.getElementById('world-id-verify-btn');
                
                statusDiv.className = 'verification-status verified';
                statusDiv.textContent = '‚úÖ Verificado com World ID!';
                
                verifyBtn.textContent = '‚úì J√° verificado';
                verifyBtn.disabled = true;
                verifyBtn.style.background = 'linear-gradient(135deg, #00ff88, #00cc6a)';
            }
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            checkWorldAppEnvironment();
            checkExistingVerification();
        });

        // Also run immediately in case DOM is already loaded
        if (document.readyState === 'complete' || document.readyState === 'interactive') {
            checkWorldAppEnvironment();
            checkExistingVerification();
        }
    </script>

    <!-- ======================= JAVASCRIPT ORIGINAL ======================= -->
    <script>
        // Rolagem suave do menu
        document.querySelectorAll("nav a").forEach(link => {
            link.addEventListener("click", e => {
                e.preventDefault();
                const alvo = document.querySelector(link.getAttribute("href"));
                if (alvo) {
                    window.scrollTo({
                        top: alvo.offsetTop - 20,
                        behavior: "smooth"
                    });
                }
            });
        });
    </script>

    <!-- BOT√ÉO FLUTUANTE WHATSAPP -->
    <a class="whatsapp-btn" href="https://wa.me/5522999604947" target="_blank" rel="noopener noreferrer">
        <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp">
        Fale comigo
    </a>

</body>
</html>
